{% extends "base.html" %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/static/js/all_schedules.js"></script>

<h2>All Schedules</h2>

<a href="/active_schedules" class="btn btn-secondary mb-3">Back to Active Schedules</a>

<!-- Форма редактирования расписания -->
<div id="scheduleEditFormContainer" style="display: none;" class="container mt-4">
    <h3>Edit Schedule</h3>
    <form id="scheduleEditForm">
        <div class="form-group">
            <label for="editMethod">Method</label>
            <select class="form-control" id="editMethod" required>
                <option value="GET">GET</option>
                <option value="POST">POST</option>
            </select>
        </div>

        <div class="form-group">
            <label for="editUrl">URL</label>
            <input type="text" class="form-control" id="editUrl" placeholder="Enter URL" required>
        </div>

        <div class="form-group">
            <label for="editScheduleType">Schedule Type</label>
            <select class="form-control" id="editScheduleType" required>
                <option value="interval">Interval</option>
                <option value="daily">Every Day</option>
            </select>
        </div>

        <!-- Поле для интервала (минуты) -->
        <div class="form-group" id="editIntervalDiv">
            <label for="editInterval">Interval (minutes)</label>
            <input type="number" class="form-control" id="editInterval" placeholder="Enter interval in minutes">
        </div>

        <!-- Поле для времени запуска каждый день -->
        <div class="form-group" id="editDailyTimeDiv" style="display: none;">
            <label for="editDailyTime">Time of day (HH:MM)</label>
            <input type="time" class="form-control" id="editDailyTime">
        </div>

        <!-- Поле для POST данных -->
        <div class="form-group" id="editPostDataDiv" style="display: none;">
            <label for="editData">POST Data</label>
            <textarea class="form-control" id="editData" rows="3" placeholder="Enter POST data"></textarea>
        </div>

        <input type="hidden" id="editScheduleId">

        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <button type="button" class="btn btn-secondary" onclick="hideEditForm()">Cancel</button>
        </div>
    </form>
</div>

<table class="table table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Method</th>
            <th>URL</th>
            <th>Schedule</th>
            <th>Last Run</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody id="allScheduleList">
        <!-- Данные будут загружены через JS -->
    </tbody>
</table>

{% endblock %}
